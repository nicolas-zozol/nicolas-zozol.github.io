{"data":{"markdownRemark":{"id":"29bd5313-c510-50c4-a063-6a3a75cc2aa7","html":"<h1>Redux</h1>\n<h2>3 Principles</h2>\n<h3>State tree</h3>\n<ul>\n<li>All the state is one single object: the state tree</li>\n<li>\n<p>You NEVER mutate directly State tree: you must pass an <strong>Action</strong> </p>\n<ul>\n<li>keep track of every mutation</li>\n</ul>\n</li>\n<li>Read-only    </li>\n</ul>\n<h3>Actions</h3>\n<ul>\n<li>\n<p>You can't change directly the state tree</p>\n<ul>\n<li>you need to <strong>dispatch</strong> an <strong>Action</strong></li>\n</ul>\n</li>\n<li>\n<p>Action is a single object with a name and data</p>\n<ul>\n<li>it MUST have a <strong>type</strong> property</li>\n<li>it may have additional data</li>\n<li>represents how to change which data</li>\n</ul>\n</li>\n<li>Just like a function with parameters</li>\n</ul>\n<h3>Reducer</h3>\n<ul>\n<li>You modify a state by giving an <strong>Action</strong> and a <strong>Reducer</strong></li>\n<li>\n<p><strong>Action</strong> is a <em>Interface signature</em></p>\n<ul>\n<li>where state is missing</li>\n</ul>\n</li>\n<li>\n<p><strong>Reducer</strong> is the <em>method implementation</em> that changes the state</p>\n<ul>\n<li>where state is given</li>\n</ul>\n</li>\n</ul>\n<h3>pure function</h3>\n<ul>\n<li>A reducer is a pure function</li>\n<li>params are currentState &#x26; action (with its own params)</li>\n<li>a reducer returns the new state</li>\n</ul>\n<h3>Time travel</h3>\n<ul>\n<li>A given sequence of reducers will always put the app in the same state</li>\n<li>Hot code reload will restart app with the reducer sequence</li>\n</ul>\n<h3>reducer conventions</h3>\n<p> By convention: </p>\n<ul>\n<li>\n<p>If the first state is undefined, return <em>initialState</em></p>\n<ul>\n<li>and not <em>previousState</em> !</li>\n<li>usually gives a initial value to param</li>\n</ul>\n</li>\n<li>\n<p>If the action is unknown , return <em>previousState</em></p>\n<ul>\n<li>or not relevant for this reducer</li>\n</ul>\n</li>\n</ul>\n<h3>Example</h3>\n<pre><code>    export function playerFilter(state = '', action = {}) {\n      switch (action.type) {\n        case SET_PLAYER_FILTER:\n          return action.text || '';\n        default:\n          return state;\n      }\n    }\n    \n</code></pre>\n<h2>The Store</h2>\n<h3>Principles</h3>\n<p>The Store binds the 3 principles:</p>\n<ul>\n<li>holds the state</li>\n<li>lets you dispatch actions</li>\n<li>need to tell the reducers that will change state</li>\n</ul>\n<pre><code>    import {createStore} from 'redux'\n    const reducer = () => ....\n    const store = createStore(reducer);\n</code></pre>\n<h3>API</h3>\n<ul>\n<li>Stores the application state</li>\n<li><code>store.createStore(reducer)</code>: Create a store registering reducers </li>\n<li><code>store.getState()</code>: read current State</li>\n<li><code>store.dispatch(ACTION)</code>: modifies current State</li>\n<li>\n<p><code>store.subscribe(callback)</code>: react on state modification</p>\n<ul>\n<li>will print new state on the UI</li>\n</ul>\n</li>\n</ul>\n<h3>Listener</h3>\n<ul>\n<li>A store has some <code>listeners</code></li>\n<li><code>store.subscribe(listener)</code> adds a listener to the store</li>\n</ul>\n<h2>Connect</h2>\n<h4>react-redux</h4>\n<ul>\n<li><code>react-redux</code> is independant from redux</li>\n<li>\n<p>It helps using redux with react logic</p>\n<ul>\n<li>\n<p>but it's not mandatory</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3>Pure components and Container components</h3>\n<ul>\n<li>\n<p>Pure components are describe with pure functions</p>\n<ul>\n<li>easy unit test</li>\n<li>most of components</li>\n</ul>\n</li>\n<li>\n<p>Container components fetch data and/or change the state</p>\n<ul>\n<li>higher order component</li>\n<li>needs usually integration tests</li>\n<li>fewer components</li>\n</ul>\n</li>\n</ul>\n<h3>Higher Order Component</h3>\n<blockquote>\n<p>A higher-order component is just a <strong>function</strong> that takes an existing component and returns another component that wraps it.</p>\n</blockquote>\n<h3>connect()</h3>\n<p><a href=\"http://www.sohamkamani.com/blog/2017/03/31/react-redux-connect-explained/\">Connect explained</a></p>\n<h3>mappings</h3>\n<pre><code>    export default connect(\n      mapStateToProps,\n      mapDispatchToProps\n    )(TodoItem)\n</code></pre>\n<ul>\n<li>\n<p>We export an higher order component</p>\n<ul>\n<li>higher than TodoItem</li>\n</ul>\n</li>\n<li>\n<p><code>mapStateToProps</code>: how to read the store</p>\n</li>\n<li>\n<p><code>mapDispatchToProps</code>: how to change the store</p>\n</li>\n</ul>\n<h2>Conclusion</h2>\n<ul>\n<li>Redux is dead-simple</li>\n<li><code>connect</code> is more complex to understand</li>\n<li>Code is much more maintanable</li>\n<li>No need to trace the props flow</li>\n<li>\n<p>Better performances</p>\n<ul>\n<li><a href=\"https://github.com/reactjs/redux/issues/419#issuecomment-129188175\">No need to  re-renders of middle-level components</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"Redux","author":"John Doe","date":"Dec 5th 2018","tags":["javascript","hard","front"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMCBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHj6ncpgf/EABgQAAIDAAAAAAAAAAAAAAAAAAABAhAx/9oACAEBAAEFAlcRaf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgMv/aAAgBAQAGPwIlf//EABwQAQACAgMBAAAAAAAAAAAAAAEAESGRMVFx4f/aAAgBAQABPyF5+RFbpqo+O5ygHPqOGif/2gAMAwEAAgADAAAAEKw//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QCf/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EGf/xAAbEAEBAQACAwAAAAAAAAAAAAABEQAhYTFBcf/aAAgBAQABPxCViiehI/cAg7rODEMSUKJ4R00KFcua8AOt/9k=","aspectRatio":1.7777777777777777,"src":"/static/e834516103414267c698d99dec28c2c0/ca4e2/javascript.jpg","srcSet":"/static/e834516103414267c698d99dec28c2c0/fbb42/javascript.jpg 175w,\n/static/e834516103414267c698d99dec28c2c0/d4326/javascript.jpg 350w,\n/static/e834516103414267c698d99dec28c2c0/ca4e2/javascript.jpg 700w,\n/static/e834516103414267c698d99dec28c2c0/94e62/javascript.jpg 1050w,\n/static/e834516103414267c698d99dec28c2c0/b191c/javascript.jpg 1280w","sizes":"(max-width: 700px) 100vw, 700px"}}}}},"file":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAeA9Ghc4wSjFWAgP/8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIAEBEgIf/aAAgBAQABBQKOoFs2RB3Qmv/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABkQAAEFAAAAAAAAAAAAAAAAAAEAEBEhMP/aAAgBAQAGPwJQLcYf/8QAGxABAQEAAgMAAAAAAAAAAAAAAREAECExcYH/2gAIAQEAAT8hy9fbJGcMG9zuZmCgPLkj94s7Mi14/9oADAMBAAIAAwAAABDgKvL/xAAXEQADAQAAAAAAAAAAAAAAAAABESBB/9oACAEDAQE/EAtj/8QAFhEAAwAAAAAAAAAAAAAAAAAAAREg/9oACAECAQE/EC4//8QAGxABAAMBAQEBAAAAAAAAAAAAAQARITFREEH/2gAIAQEAAT8QqcjGPpiIujXwmBoQABmnBmpSUTBXlBhb+wSEROJDyXezu+z/2Q==","aspectRatio":0.665625,"src":"/static/012173bbab7e0008c24bf8ba21bd68f0/53b4a/john.jpg","srcSet":"/static/012173bbab7e0008c24bf8ba21bd68f0/bf99b/john.jpg 75w,\n/static/012173bbab7e0008c24bf8ba21bd68f0/9d7df/john.jpg 150w,\n/static/012173bbab7e0008c24bf8ba21bd68f0/53b4a/john.jpg 300w,\n/static/012173bbab7e0008c24bf8ba21bd68f0/88085/john.jpg 426w","sizes":"(max-width: 300px) 100vw, 300px"}}}},"pageContext":{"slug":"redux","imageUrl":"john.jpg"}}