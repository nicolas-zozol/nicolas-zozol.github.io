{"data":{"markdownRemark":{"id":"f2c2dfe3-3033-518b-b00e-4b73241bf9c0","html":"<p>Solid principles are important for writing maintainable code.</p>\n<hr>\n<h1>SOLID</h1>\n<h2>Solid Principles</h2>\n<ul>\n<li>S : Single responsibility principle</li>\n<li>O : Open/Close</li>\n<li>\n<p>L : Liskov substitution principle</p>\n<ul>\n<li>Design by Contract</li>\n</ul>\n</li>\n<li>\n<p>I : Interface segregation principle</p>\n<ul>\n<li>Designer ses API par Cohésion Forte</li>\n</ul>\n</li>\n<li>\n<p>D : Dependency inversion principle</p>\n<ul>\n<li>Bien réfléchir à l'<em>ownership</em> des association</li>\n</ul>\n</li>\n</ul>\n<h2>Open/Close</h2>\n<h3>Full open</h3>\n<pre><code>    // Using Opened abstractions : Parser, Response\n    function string(s) {\n        return new Parser((input, index = 0) => {\n            if (input.subStreamAt(s.split(''), index)) \n                return response.accept(s, input, index + s.length, true);\n            else {\n                return response.reject(input.location(index), false);\n            }\n        });\n    }        \n    export default { char, string ...} // export Char bundle\n    \n\n    // Outside module        \n    // pseudocode\n    assert C.string('Hello').parse('Hello').isAccepted()\n            \n</code></pre>\n<h3>Using closed functions</h3>\n<pre><code>    // refactoring with closed little functions\n    const subStream = (length)  => any().occurrence(length);\n            \n    const subString = (length)=> subStream(length).map((s) => s.join(\"\"));\n    \n    function string(s) {\n        return doTry(subString(s.lenght).filter((r) => r === s));\n    }\n    \n</code></pre>\n<ul>\n<li><code>string</code> parle à <code>substring()</code> </li>\n<li><code>substring</code> parle à <code>substream</code></li>\n<li>Malheureusement... 10x plus lent</li>\n</ul>\n<h2>Liskov Substitution Principle</h2>\n<p><em>objects in a program should be replaceable with instances of their subtypes\nwithout altering the correctness of that program</em></p>\n<h3>Violation</h3>\n<pre><code>    User getUser(){ return john;}        \n    Premium getPremiumUser(){ return john;}\n    void doUserStuff(User u){};\n    void doPremiumStuff(Premium u);\n    \n    // then :        \n    Premium john = getPremiumUser();\n    work(john);\n    function work(User u){        \n        if (john.isInstanceOf(Premium)){\n            doPremiumStuff( (Premium)u )\n        }else{\n            doUserStuff(u)\n        }\n    }\n    \n</code></pre>\n<h3>Pourquoi ?</h3>\n<ul>\n<li>Risques d'erreur</li>\n<li>Risque de devoir faire un <em>méchant</em> cast</li>\n<li>Peu de place à l'évolution des différents Users</li>\n<li>Il faut changer la fonction work</li>\n</ul>\n<h3>Exemple</h3>\n<pre><code>    User implements Stuffable{\n        doStuff();\n    }\n    \n     Premium extends User{\n        override doStuff();\n     }\n    \n    // then\n    function work(User u){      \n        u.doStuff();\n    }\n\n\n    \n</code></pre>\n<h3>Autre Violation</h3>\n<p>Liskov aka <strong>Design by Contract</strong></p>\n<pre><code>    class Rectangle (height:int, width:int ){};\n    class Square extends Rectangle (){};\n    \n    Rectangle r = new Square();\n    r.height = 5;\n    r.height = 6; // !!!!! a square IS a rectangle, but contract is NOT\n</code></pre>\n<h3>Contrats et Domain</h3>\n<ul>\n<li>User</li>\n<li>Admin extends User</li>\n<li>Premium extends User</li>\n<li>\n<p>Trois contrats différents</p>\n<ul>\n<li>Strategies</li>\n<li>Association plutôt qu'héritage</li>\n</ul>\n</li>\n</ul>\n<h2>Dependency inversion principle</h2>\n<ul>\n<li>\n<p>Les modules de haut niveau ne doivent pas dépendre des modules de bas niveau. </p>\n<ul>\n<li>Les deux doivent dépendre d'abstractions.</li>\n</ul>\n</li>\n<li>\n<p>Les abstractions ne doivent pas dépendre des détails</p>\n<ul>\n<li>Les détails doivent dépendre des abstractions.</li>\n</ul>\n</li>\n</ul>\n<p>Il faut donc coder en ayant en tête:</p>\n<ul>\n<li>Qu'est-ce qu'une abstraction ?</li>\n<li>\n<p>Je code du haut-niveau ou du bas-niveau</p>\n<ul>\n<li>ou les deux ? (middleware...)</li>\n</ul>\n</li>\n<li>Qu'est qu'un détail ?</li>\n</ul>\n<h3>Abstraction</h3>\n<p>From Clean Code : <em>Hiding implementation is about abstractions</em></p>\n<ul>\n<li>\n<p>Une Abstraction est un process qui définit une chose</p>\n<ul>\n<li>peu importe comment cela est réalisée</li>\n</ul>\n</li>\n</ul>\n<h3>Classic:</h3>\n<pre><code>    class HighLogger{\n        \n        private $lowLevel;        \n        \n        function doStuff(){\n            return $this->lowLevel->doStuff()\n        }\n        $this->lowLevel.warn(message)        \n    }\n</code></pre>\n<h3>Dependency Inversion</h3>\n<pre><code>    class HighLevel{\n        \n        private $openedLogger = OpenedLogger.factory()            \n        doStuff(){\n            return $this->openedLogger->warn()\n        }\n    }\n\n    class OpenedLogger{\n        \n        static factory(){ // or independant class OpenedLoggerFactory\n            return new LowLevel();\n        }        \n        abstract log()\n        abstract warn()        \n    }\n\n    final class LowLevel extends OpenedLogger{            \n        override log()\n        abstract warn()        \n    }\n</code></pre>\n<h3>Important</h3>\n<ul>\n<li>Dependency Injection != Dependency Inversion</li>\n<li>Mais les deux patterns se combinent très bien </li>\n</ul>\n<h3>Conclusions</h3>\n<ul>\n<li>Oh non ! Il faut coder !</li>\n<li>\n<p>Principe d'isolation: <em>Talk to friends, do not talk to strangers</em></p>\n<ul>\n<li>Loi de Demeter</li>\n</ul>\n</li>\n<li>\n<p>Haut niveau et bas niveau ne sont pas amis</p>\n<ul>\n<li>Il faut passer par une abstraction</li>\n</ul>\n</li>\n<li>\n<p>Le couplage n'est pas réduit mais déplacé</p>\n<ul>\n<li>vers des zones moins réutilisées</li>\n</ul>\n</li>\n</ul>\n<h2>TP Logger</h2>\n<pre><code>    # Low level lib\n    Define Appender : info(), warn(), error()\n    Create FileAppender, ConsoleAppender \n    \n    # High level client\n    Create HighLogger.disaster()\n    \n    # Create with high coupling\n    HighLogger -> Appender \n    \n    # Create FacadeLogger interface\n        - and FileFacade implementation\n    \n    \n    \n    \n    \n    \n    \n</code></pre>","frontmatter":{"title":"Solid Principles","author":null,"date":"Nov 7th 2016","tags":["theory","hard","clean-code","architecture","java"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMCBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHj6ncpgf/EABgQAAIDAAAAAAAAAAAAAAAAAAABAhAx/9oACAEBAAEFAlcRaf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgMv/aAAgBAQAGPwIlf//EABwQAQACAgMBAAAAAAAAAAAAAAEAESGRMVFx4f/aAAgBAQABPyF5+RFbpqo+O5ygHPqOGif/2gAMAwEAAgADAAAAEKw//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QCf/EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EGf/xAAbEAEBAQACAwAAAAAAAAAAAAABEQAhYTFBcf/aAAgBAQABPxCViiehI/cAg7rODEMSUKJ4R00KFcua8AOt/9k=","aspectRatio":1.7777777777777777,"src":"/static/e834516103414267c698d99dec28c2c0/13e10/javascript.jpg","srcSet":"/static/e834516103414267c698d99dec28c2c0/87c5e/javascript.jpg 175w,\n/static/e834516103414267c698d99dec28c2c0/dec55/javascript.jpg 350w,\n/static/e834516103414267c698d99dec28c2c0/13e10/javascript.jpg 700w,\n/static/e834516103414267c698d99dec28c2c0/1e2f4/javascript.jpg 1050w,\n/static/e834516103414267c698d99dec28c2c0/c108b/javascript.jpg 1280w","sizes":"(max-width: 700px) 100vw, 700px"}}}}},"file":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAEz0lEQVQ4ywHEBDv7APbRTtWzT9azU9a1V9a1XNa2Xtm6YtGpWbWETryMVZxmRoxTPKVyR9a0ati9dti8d9q+e9q/ftrCgvjjkADVtV0xFEgwEkkzFUs0FUszFU0+HU10Ojl6PDl/QkF8Pzl+QTp7OzZ5PDpOKFdGIl1KJl5LJWFRK2TeypcA1bhsMxRNMhNONRVQNxdRNRVUTiROiUc9jk9Fi01DjU5DkU9EjkxDiEQ0aDNOTiZqVippVytsXTFw4c6mANe9ez4cVT4bV0IeWkUfWkIfYWMvTIA8LndAOHFBOm8/OGw3L3Y4MII8Lnk8TWQ1ems4em05fXQ/guXUuADaw4tLJWFMJWJQKGVTKWZUKGpvRVljRTtgUlCKiopnYmIzIB16b25jQDhwOUZ7RIx7Q4l7Q4p+Rorm1b4A3cibXDBvXjF1YTN5ZDV9azp9Xj9ETiohTR4VTyAZRhsVQxgTRyonPiQgWj9BeD96f0SIfkOFgUeO5NC3AOLOrXA8fnI6bn4/aIVAYo1CT4o5MIgzKpA8Mow5MJZANZA9Mo05LGokGlsjFnM7KmEvI1QlIWw2S9/IqQDl07p9RYhUKC5OIwtVJAxfKxKBQSuTUT56Oie0Ykh4PSsSAgBBKyF6SDRMHglWLAxIIgk2FgI/HAjNsocA48+2fkWKdT9+YDJVSSI2OxgNjFAx2Zt5v4ho+aeAiF1IAAAABw4QlmVSazMcVikRRB0RUSk3YjFZ0Jl9AODJrXxDh3pBioFHj7lxjHhCN6BhP/Cmg+mhfeSceeOad4dYQ3lWRrR5X710V3tHJFYqMG88hW87gNOogwDew6R6Q4ZvOoaZW4D/sYmfXkZ6RirtpYLjnHrimHXglHHsnnr7sYrAgWWuc1huQRhRJylgMnViNXLUs4UA2r2adUCCZzaCpmV8/6yBomBtXDAr2pRu25R02pV11pJz0opq3JZ02I5vZzcdQxwMVSpXVixuVi1ozql3ANe3kHA9fF8xfJlYc/aXaJpadFkuasuJcd+TcMV7acR/b9GFaOKee9uOaXQ2N0MgW00mZEYiXkciXMihbADTsYVhM3NZLXK1bXD4mGmjYnBHIW2IUWbfl3Hfl3felHPinXvRimvKakilZ11NMlY3FEs0FE8yFEvCmV8Ay6Z4aThpxHdu7JNw75RvzHxsSSNeRCFeu3Zo35Fv3JN2zX5gu1s/z3NQxndWZ1JGIxIlIgVDIghAvJJTAL6bbIRJX/SVa+mQb+uUceOJZ0YYSF5Jct6ghtR6VtB3V8psTNN5V9eDXtZ5WbCdmCIbFz0VKSUJP7qMSgC1kF2CSFr1m3bplHPtlXPafmAwEhtsUkzekHDfj2jej2rbimXcimXUfFnnt6m2t7UVERBbKRZKHiW3hj0ArodQcz5P9Jhx6ZNy7pVz1H1eOBgKYkc84LOh3Ipl2oll3Yxn14RgrIN39vXztbKwExERVCUZViYVuoQpALCGR1stSeyTceqTce6Vc8x1VzwbEE8vIcu4r96ScNuMZuOSa8WIboqBgPjz7c7KxiEeG1cmF1MlFbeBIQDSnj6ybjLhh1/slnTrk3HZelSwciS1fybFkDjYmTvWlDPYlTLMkzTEkjferFHTo0itfSO6fyO3fyTQlivkmQs/oLxE6AAAAABJRU5ErkJggg==","aspectRatio":1,"src":"/static/857373fa3e098e011b629566b14e4f4b/fdbb0/nicolas-zozol.png","srcSet":"/static/857373fa3e098e011b629566b14e4f4b/e22c9/nicolas-zozol.png 75w,\n/static/857373fa3e098e011b629566b14e4f4b/d3809/nicolas-zozol.png 150w,\n/static/857373fa3e098e011b629566b14e4f4b/fdbb0/nicolas-zozol.png 300w,\n/static/857373fa3e098e011b629566b14e4f4b/b5207/nicolas-zozol.png 450w,\n/static/857373fa3e098e011b629566b14e4f4b/59139/nicolas-zozol.png 600w,\n/static/857373fa3e098e011b629566b14e4f4b/728bb/nicolas-zozol.png 1080w","sizes":"(max-width: 300px) 100vw, 300px"}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"solid-principles","imageUrl":"nicolas-zozol.png"}}